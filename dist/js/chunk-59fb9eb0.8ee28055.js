(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59fb9eb0"],{"29ac":function(t,e,o){},4001:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.note?o("div",{staticClass:"page-change__note"},[o("div",{staticClass:"note__title"},[o("h1",[t._v(" #"+t._s(t.note.id)+": "),t.isEdit?t._e():o("span",[t._v(t._s(t.noteTitle))]),t.isEdit?o("input",{staticClass:"input__title",attrs:{type:"text"},domProps:{value:t.note.title},on:{input:t.input}}):t._e()]),o("small",{staticClass:"event ml-1",on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v("["+t._s(t.isEdit?"Закончить редактирование":"Изменить заголовок")+"]")])]),o("hr"),o("app-todo-list",{attrs:{todos:t.note.todos},on:{"remove-todo":t.removeTodo}}),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todoDescription,expression:"todoDescription"}],staticClass:"mr-2",attrs:{type:"text"},domProps:{value:t.todoDescription},on:{input:function(e){e.target.composing||(t.todoDescription=e.target.value)}}}),o("small",{staticClass:"event",on:{click:t.addTodo}},[t._v("[Добавить задачу]")])]),o("hr"),o("br"),o("div",{staticClass:"options"},[o("button",{on:{click:t.toBack}},[t._v("Отменить")]),o("button",{staticClass:"ml-1 success",on:{click:t.saveChange}},[t._v(" Сохранить изменении ")]),o("button",{staticClass:"ml-1 danger",on:{click:function(e){return t.remove(t.noteId)}}},[t._v("Удалить")]),o("button",{directives:[{name:"hotkey",rawName:"v-hotkey",value:t.keymap,expression:"keymap"}],staticClass:"ml-1 danger",on:{click:t.undo}},[t._v(" Вернуть ")])]),o("br"),t.loading?o("span",[t._v(t._s(t.loader))]):t._e()],1):t._e()},i=[],s=o("9ab4"),a=o("60a3"),r=o("2fe1"),c=o("8c50"),d=o("52f5"),u=o("d9c5"),l=o("67ac"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["d"])(e,t),e.prototype.addTodo=function(){if(!this.todoDescription)return alert("Введите название TODO");var t=this.getNotes[this.noteId];this.$saveTo("backupSnapshots",{storageKey:u["a"],data:t}),this.note.todos.push({id:l["a"].generateId(),isDone:!1,description:this.todoDescription}),this.todoDescription=""},e.prototype.removeTodo=function(t){this.note.todos=this.note.todos.filter((function(e){return e.id!==t}))},e=Object(s["c"])([a["a"]],e),e}(a["c"]),v=p,h=o("2f62"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEdit=!1,e.loading=!1,e.loader="",e.title="",e.todoDescription="",e}return Object(s["d"])(e,t),Object.defineProperty(e.prototype,"noteTitle",{get:function(){return this.note.title?this.note.title:"Безымянный"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"note",{get:function(){return this.getNoteById(this.noteId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keymap",{get:function(){return{"ctrl+z":this.undo,"meta+z":this.undo}},enumerable:!0,configurable:!0}),e.prototype.input=function(t){this.title=t.target.value},e.prototype.saveChange=function(){var t=this;this.loading=!0,this.loader="Идет сохранение...",setTimeout((function(){t._saveChange({id:t.noteId,title:t.title||t.noteTitle,todos:t.note.todos}),t.loader="Сохранено",t.isEdit=!1,setTimeout((function(){return t.loading=!1}),500)}),1e3)},e.prototype.toBack=function(){var t=confirm("Отменить изменение?");t&&this.$router.go(-1)},Object(s["c"])([Object(a["b"])({type:Number})],e.prototype,"noteId",void 0),e=Object(s["c"])([Object(a["a"])({components:{AppTodoList:c["a"]},computed:Object(s["a"])({},Object(h["c"])({getNoteById:"getNoteById",getNotes:"getNotes"})),methods:Object(s["a"])(Object(s["a"])({},Object(h["b"])({_saveChange:"_saveChange",_remove:"_remove"})),Object(h["d"])({_restore:"setRestore"}))})],e),e}(Object(r["c"])(d["a"],v)),m=f,b=m,y=o("2877"),g=Object(y["a"])(b,n,i,!1,null,null,null);e["default"]=g.exports},"52f5":function(t,e,o){"use strict";var n=o("9ab4"),i=o("60a3"),s=o("8aaa"),a=o("d9c5"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n["d"])(e,t),e.prototype.create=function(){var t=this;if(!this.value)return alert("Не валидные данные");this._create(this.value),this.$nextTick((function(){t.value="",t.$router.push({name:"HomePage"})}))},e.prototype.remove=function(t){var e=confirm("Вы точно хотите #"+t);e&&(this._remove(t),"/"!==this.$route.path&&this.$router.push({name:"HomePage"}))},e.prototype.undo=function(){var t=s["a"].getItem(a["a"],[]),e=t[this.noteId];if(e.length<=0)return alert("Backup "+this.noteId+" is empty");this._restore(this.noteId)},e.prototype.change=function(t){var e={change:"true"},o={noteId:t};this.$router.push({name:"ModifyNotePage",params:o,query:e})},e=Object(n["c"])([i["a"]],e),e}(i["c"]);e["a"]=r},"84b3":function(t,e,o){"use strict";var n=o("29ac"),i=o.n(n);i.a},"8c50":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-todo-list"},[t.todos.length>0?o("div",{staticClass:"todo-wrapper"},t._l(t.todos,(function(e){return o("div",{key:e.id,staticClass:"todo-item"},[o("app-todo",{attrs:{todo:e},on:{"remove-todo":function(e){return t.$emit("remove-todo",e)}}})],1)})),0):o("h4",[t._v("Задач пока нет")])])},i=[],s=o("9ab4"),a=o("60a3"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.todo?o("div",[o("div",{staticClass:"app-todo",class:t.isCheck},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.isDone,expression:"todo.isDone"}],staticClass:"mr-1 checkbox",attrs:{disabled:!t.$route.query.change,type:"checkbox"},domProps:{checked:Array.isArray(t.todo.isDone)?t._i(t.todo.isDone,null)>-1:t.todo.isDone},on:{change:function(e){var o=t.todo.isDone,n=e.target,i=!!n.checked;if(Array.isArray(o)){var s=null,a=t._i(o,s);n.checked?a<0&&t.$set(t.todo,"isDone",o.concat([s])):a>-1&&t.$set(t.todo,"isDone",o.slice(0,a).concat(o.slice(a+1)))}else t.$set(t.todo,"isDone",i)}}}),o("div",{staticClass:"options d-flex align-items-center"},[t.isEdit?t._e():o("span",{staticClass:"desc"},[t._v(t._s(t.todo.description))]),t.isEdit?o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo.description,expression:"todo.description"}],staticClass:"todo-edit",attrs:{type:"text"},domProps:{value:t.todo.description},on:{input:function(e){e.target.composing||t.$set(t.todo,"description",e.target.value)}}}):t._e(),t.$route.query.change?o("div",{staticClass:"btns"},[o("span",{staticClass:"btn",on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v("Редактировать")]),o("span",{staticClass:"btn",on:{click:function(e){return t.$emit("remove-todo",t.todo.id)}}},[t._v("Удалить")])]):t._e()])])]):t._e()},c=[],d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEdit=!1,e}return Object(s["d"])(e,t),Object.defineProperty(e.prototype,"isCheck",{get:function(){return{done:this.todo.isDone}},enumerable:!0,configurable:!0}),Object(s["c"])([Object(a["b"])({type:Object,default:function(){return{}}})],e.prototype,"todo",void 0),e=Object(s["c"])([a["a"]],e),e}(a["c"]),u=d,l=u,p=(o("84b3"),o("2877")),v=Object(p["a"])(l,r,c,!1,null,null,null),h=v.exports,f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s["d"])(e,t),Object(s["c"])([Object(a["b"])({type:Array,default:[]})],e.prototype,"todos",void 0),e=Object(s["c"])([Object(a["a"])({components:{AppTodo:h}})],e),e}(a["c"]),m=f,b=m,y=Object(p["a"])(b,n,i,!1,null,null,null);e["a"]=y.exports}}]);
//# sourceMappingURL=chunk-59fb9eb0.8ee28055.js.map